<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introduction to Partition • partition</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to Partition">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">partition</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/introduction-to-partition.html">An Introduction to partition</a>
    </li>
    <li>
      <a href="../articles/extending-partition.html">Extending partition</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/USCbiostats/partition">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introduction to Partition</h1>
                        <h4 class="author">Malcolm Barrett</h4>
            
            <h4 class="date">2019-05-17</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/USCbiostats/partition/blob/master/vignettes/introduction-to-partition.Rmd"><code>vignettes/introduction-to-partition.Rmd</code></a></small>
      <div class="hidden name"><code>introduction-to-partition.Rmd</code></div>

    </div>

    
    
<div id="introduction-to-the-partition-package" class="section level2">
<h2 class="hasAnchor">
<a href="#introduction-to-the-partition-package" class="anchor"></a>Introduction to the partition package</h2>
<p>partition is a fast and flexible data reduction framework that uses an approach called Direct-Measure-Reduce to create agglomerative partitions that maintain the user-specified minimum level of information. Each variable starts of as its own cluster; potential reduced variables are assessed by making sure this level of information is maintained. The reduced variables are also interpretable: original variables map to one and only one variable in the reduced data set. partition is flexible, as well: how variables are selected to reduce, how information loss is measured, and the way data is reduced can all be customized.</p>
<p>partition is particularly useful for highly correlated data, such as genetic data, where there is a lot of redundancy in the information each variable lends. <code><a href="../reference/simulate_block_data.html">simulate_block_data()</a></code> simulates data like this: blocks of correlated data that are themselves independent of the other blocks in the data:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(partition)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ggplot2)</a>
<a class="sourceLine" id="cb1-3" data-line-number="3"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/Random">set.seed</a></span>(<span class="dv">1234</span>)</a>
<a class="sourceLine" id="cb1-4" data-line-number="4"><span class="co"># create a 100 x 15 data set with 3 blocks</span></a>
<a class="sourceLine" id="cb1-5" data-line-number="5">df &lt;-<span class="st"> </span><span class="kw"><a href="../reference/simulate_block_data.html">simulate_block_data</a></span>(</a>
<a class="sourceLine" id="cb1-6" data-line-number="6">  <span class="co"># create 3 correlated blocks of 5 variables each</span></a>
<a class="sourceLine" id="cb1-7" data-line-number="7">  <span class="dt">block_sizes =</span> <span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/rep">rep</a></span>(<span class="dv">5</span>, <span class="dv">3</span>),</a>
<a class="sourceLine" id="cb1-8" data-line-number="8">  <span class="dt">lower_corr =</span> <span class="fl">.4</span>,</a>
<a class="sourceLine" id="cb1-9" data-line-number="9">  <span class="dt">upper_corr =</span> <span class="fl">.6</span>,</a>
<a class="sourceLine" id="cb1-10" data-line-number="10">  <span class="dt">n =</span> <span class="dv">100</span></a>
<a class="sourceLine" id="cb1-11" data-line-number="11">)</a>
<a class="sourceLine" id="cb1-12" data-line-number="12"></a>
<a class="sourceLine" id="cb1-13" data-line-number="13">df</a>
<a class="sourceLine" id="cb1-14" data-line-number="14"><span class="co">#&gt; # A tibble: 100 x 15</span></a>
<a class="sourceLine" id="cb1-15" data-line-number="15"><span class="co">#&gt;    block1_x1 block1_x2 block1_x3 block1_x4 block1_x5 block2_x1 block2_x2</span></a>
<a class="sourceLine" id="cb1-16" data-line-number="16"><span class="co">#&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb1-17" data-line-number="17"><span class="co">#&gt;  1   -0.306     -0.187    -1.82    -0.533    -0.547     1.71     -0.642 </span></a>
<a class="sourceLine" id="cb1-18" data-line-number="18"><span class="co">#&gt;  2   -1.40      -0.179    -1.79    -1.01     -0.839    -0.0401    0.770 </span></a>
<a class="sourceLine" id="cb1-19" data-line-number="19"><span class="co">#&gt;  3    1.35       1.27      0.938    1.54      1.38     -0.0359    0.278 </span></a>
<a class="sourceLine" id="cb1-20" data-line-number="20"><span class="co">#&gt;  4    0.941      0.786     0.587   -0.0181    0.0350   -0.172    -0.106 </span></a>
<a class="sourceLine" id="cb1-21" data-line-number="21"><span class="co">#&gt;  5    0.917      0.294     0.357   -0.711    -1.08     -0.674    -0.0997</span></a>
<a class="sourceLine" id="cb1-22" data-line-number="22"><span class="co">#&gt;  6   -0.573      0.159    -0.870   -1.14     -0.272     0.331    -0.583 </span></a>
<a class="sourceLine" id="cb1-23" data-line-number="23"><span class="co">#&gt;  7   -0.157      1.62      0.876   -0.0377    0.179     0.278    -0.839 </span></a>
<a class="sourceLine" id="cb1-24" data-line-number="24"><span class="co">#&gt;  8   -0.0469    -1.11     -0.359    0.132    -2.07     -0.809     1.33  </span></a>
<a class="sourceLine" id="cb1-25" data-line-number="25"><span class="co">#&gt;  9   -0.375     -0.354     0.562   -1.14     -0.131    -1.53     -1.87  </span></a>
<a class="sourceLine" id="cb1-26" data-line-number="26"><span class="co">#&gt; 10   -0.680      0.560    -0.687    0.290    -0.672    -0.580     0.0525</span></a>
<a class="sourceLine" id="cb1-27" data-line-number="27"><span class="co">#&gt; # … with 90 more rows, and 8 more variables: block2_x3 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb1-28" data-line-number="28"><span class="co">#&gt; #   block2_x4 &lt;dbl&gt;, block2_x5 &lt;dbl&gt;, block3_x1 &lt;dbl&gt;, block3_x2 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb1-29" data-line-number="29"><span class="co">#&gt; #   block3_x3 &lt;dbl&gt;, block3_x4 &lt;dbl&gt;, block3_x5 &lt;dbl&gt;</span></a></code></pre></div>
<p>partition takes a data frame and a threshold–the minimum amount of information a reduced variable must explain to be created–and reduces the data to as few variables as possible. The threshold prevents information loss: each reduced variable must still explain at least that much.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1">prt &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(df, <span class="dt">threshold =</span> <span class="fl">.5</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"></a>
<a class="sourceLine" id="cb2-3" data-line-number="3">prt</a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; Partitioner:</span></a>
<a class="sourceLine" id="cb2-5" data-line-number="5"><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></a>
<a class="sourceLine" id="cb2-6" data-line-number="6"><span class="co">#&gt;    Metric: Intraclass Correlation </span></a>
<a class="sourceLine" id="cb2-7" data-line-number="7"><span class="co">#&gt;    Reducer: Scaled Mean</span></a>
<a class="sourceLine" id="cb2-8" data-line-number="8"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-9" data-line-number="9"><span class="co">#&gt; Reduced Variables:</span></a>
<a class="sourceLine" id="cb2-10" data-line-number="10"><span class="co">#&gt; 4 reduced variables created from 10 observed variables</span></a>
<a class="sourceLine" id="cb2-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-12" data-line-number="12"><span class="co">#&gt; Mappings:</span></a>
<a class="sourceLine" id="cb2-13" data-line-number="13"><span class="co">#&gt; reduced_var_1 = {block3_x1, block3_x2, block3_x3}</span></a>
<a class="sourceLine" id="cb2-14" data-line-number="14"><span class="co">#&gt; reduced_var_2 = {block1_x1, block1_x2, block1_x5}</span></a>
<a class="sourceLine" id="cb2-15" data-line-number="15"><span class="co">#&gt; reduced_var_3 = {block2_x2, block2_x5}</span></a>
<a class="sourceLine" id="cb2-16" data-line-number="16"><span class="co">#&gt; reduced_var_4 = {block2_x1, block2_x4}</span></a>
<a class="sourceLine" id="cb2-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-18" data-line-number="18"><span class="co">#&gt; Minimum information:</span></a>
<a class="sourceLine" id="cb2-19" data-line-number="19"><span class="co">#&gt; 0.501</span></a></code></pre></div>
<p>partition creates a <code>tibble</code> with the newly reduced variables:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="kw"><a href="../reference/partition_scores.html">partition_scores</a></span>(prt)</a>
<a class="sourceLine" id="cb3-2" data-line-number="2"><span class="co">#&gt; # A tibble: 100 x 9</span></a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt;    block1_x3 block1_x4 block2_x3 block3_x4 block3_x5 reduced_var_1</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="co">#&gt;        &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb3-5" data-line-number="5"><span class="co">#&gt;  1    -1.82    -0.533     0.665     0.884      0.245        0.869 </span></a>
<a class="sourceLine" id="cb3-6" data-line-number="6"><span class="co">#&gt;  2    -1.79    -1.01      0.468     1.96       0.463       -0.460 </span></a>
<a class="sourceLine" id="cb3-7" data-line-number="7"><span class="co">#&gt;  3     0.938    1.54     -0.142     0.0903    -1.64        -0.357 </span></a>
<a class="sourceLine" id="cb3-8" data-line-number="8"><span class="co">#&gt;  4     0.587   -0.0181   -0.824    -1.34      -1.20        -2.07  </span></a>
<a class="sourceLine" id="cb3-9" data-line-number="9"><span class="co">#&gt;  5     0.357   -0.711     0.230     0.874     -1.70         0.205 </span></a>
<a class="sourceLine" id="cb3-10" data-line-number="10"><span class="co">#&gt;  6    -0.870   -1.14     -1.24     -0.289     -0.406        0.0871</span></a>
<a class="sourceLine" id="cb3-11" data-line-number="11"><span class="co">#&gt;  7     0.876   -0.0377   -1.27     -2.50      -1.53        -2.96  </span></a>
<a class="sourceLine" id="cb3-12" data-line-number="12"><span class="co">#&gt;  8    -0.359    0.132     0.0977    0.109     -0.152       -0.828 </span></a>
<a class="sourceLine" id="cb3-13" data-line-number="13"><span class="co">#&gt;  9     0.562   -1.14     -1.01      0.953     -1.28         0.745 </span></a>
<a class="sourceLine" id="cb3-14" data-line-number="14"><span class="co">#&gt; 10    -0.687    0.290     0.605    -1.91      -1.07        -0.645 </span></a>
<a class="sourceLine" id="cb3-15" data-line-number="15"><span class="co">#&gt; # … with 90 more rows, and 3 more variables: reduced_var_2 &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb3-16" data-line-number="16"><span class="co">#&gt; #   reduced_var_3 &lt;dbl&gt;, reduced_var_4 &lt;dbl&gt;</span></a></code></pre></div>
<p>Each variable in the original data set maps to one reduced variable; in this partition, there are four reduced variables consisting of two to three variables each, as well as five of the original variables that did not get reduced because too much information would have been lost.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/plot_partitions.html">plot_ncluster</a></span>(prt) <span class="op">+</span></a>
<a class="sourceLine" id="cb4-2" data-line-number="2"><span class="st">  </span><span class="co"># plot_*() functions return ggplots, so they can be extended using ggplot2</span></a>
<a class="sourceLine" id="cb4-3" data-line-number="3"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>(<span class="dv">14</span>)</a></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;"></p>
<p>Each reduced variable explains at least 50% of the information of the original variables from which it was created. The distribution of information has a lower limit of our threshold, .5.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb5-1" data-line-number="1"><span class="kw"><a href="../reference/plot_partitions.html">plot_information</a></span>(prt, <span class="dt">geom =</span> geom_histogram) <span class="op">+</span></a>
<a class="sourceLine" id="cb5-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>(<span class="dv">14</span>)</a></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-5-1.png" width="672" style="display: block; margin: auto;"></p>
<p>A key for these mappings and the information each variable explains can be retrieved with <code><a href="../reference/mapping_key.html">mapping_key()</a></code>, which returns a nested <code>tibble</code>.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="../reference/mapping_key.html">mapping_key</a></span>(prt)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2"><span class="co">#&gt; # A tibble: 9 x 4</span></a>
<a class="sourceLine" id="cb6-3" data-line-number="3"><span class="co">#&gt;   variable      mapping   information indices  </span></a>
<a class="sourceLine" id="cb6-4" data-line-number="4"><span class="co">#&gt;   &lt;chr&gt;         &lt;list&gt;          &lt;dbl&gt; &lt;list&gt;   </span></a>
<a class="sourceLine" id="cb6-5" data-line-number="5"><span class="co">#&gt; 1 block1_x3     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></a>
<a class="sourceLine" id="cb6-6" data-line-number="6"><span class="co">#&gt; 2 block1_x4     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></a>
<a class="sourceLine" id="cb6-7" data-line-number="7"><span class="co">#&gt; 3 block2_x3     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></a>
<a class="sourceLine" id="cb6-8" data-line-number="8"><span class="co">#&gt; 4 block3_x4     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></a>
<a class="sourceLine" id="cb6-9" data-line-number="9"><span class="co">#&gt; 5 block3_x5     &lt;chr [1]&gt;       1     &lt;int [1]&gt;</span></a>
<a class="sourceLine" id="cb6-10" data-line-number="10"><span class="co">#&gt; 6 reduced_var_1 &lt;chr [3]&gt;       0.520 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb6-11" data-line-number="11"><span class="co">#&gt; 7 reduced_var_2 &lt;chr [3]&gt;       0.501 &lt;int [3]&gt;</span></a>
<a class="sourceLine" id="cb6-12" data-line-number="12"><span class="co">#&gt; 8 reduced_var_3 &lt;chr [2]&gt;       0.534 &lt;int [2]&gt;</span></a>
<a class="sourceLine" id="cb6-13" data-line-number="13"><span class="co">#&gt; 9 reduced_var_4 &lt;chr [2]&gt;       0.514 &lt;int [2]&gt;</span></a></code></pre></div>
<p>To see each individual mapping, you can unnest them using <code><a href="../reference/mapping_key.html">unnest_mappings()</a></code> (or do it yourself with <code><a href="https://tidyr.tidyverse.org/reference/unnest.html">tidyr::unnest()</a></code>)</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw"><a href="../reference/mapping_key.html">unnest_mappings</a></span>(prt)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2"><span class="co">#&gt; # A tibble: 15 x 4</span></a>
<a class="sourceLine" id="cb7-3" data-line-number="3"><span class="co">#&gt;    variable      information mapping   indices</span></a>
<a class="sourceLine" id="cb7-4" data-line-number="4"><span class="co">#&gt;    &lt;chr&gt;               &lt;dbl&gt; &lt;chr&gt;       &lt;int&gt;</span></a>
<a class="sourceLine" id="cb7-5" data-line-number="5"><span class="co">#&gt;  1 block1_x3           1     block1_x3       3</span></a>
<a class="sourceLine" id="cb7-6" data-line-number="6"><span class="co">#&gt;  2 block1_x4           1     block1_x4       4</span></a>
<a class="sourceLine" id="cb7-7" data-line-number="7"><span class="co">#&gt;  3 block2_x3           1     block2_x3       8</span></a>
<a class="sourceLine" id="cb7-8" data-line-number="8"><span class="co">#&gt;  4 block3_x4           1     block3_x4      14</span></a>
<a class="sourceLine" id="cb7-9" data-line-number="9"><span class="co">#&gt;  5 block3_x5           1     block3_x5      15</span></a>
<a class="sourceLine" id="cb7-10" data-line-number="10"><span class="co">#&gt;  6 reduced_var_1       0.520 block3_x1      11</span></a>
<a class="sourceLine" id="cb7-11" data-line-number="11"><span class="co">#&gt;  7 reduced_var_1       0.520 block3_x2      12</span></a>
<a class="sourceLine" id="cb7-12" data-line-number="12"><span class="co">#&gt;  8 reduced_var_1       0.520 block3_x3      13</span></a>
<a class="sourceLine" id="cb7-13" data-line-number="13"><span class="co">#&gt;  9 reduced_var_2       0.501 block1_x1       1</span></a>
<a class="sourceLine" id="cb7-14" data-line-number="14"><span class="co">#&gt; 10 reduced_var_2       0.501 block1_x2       2</span></a>
<a class="sourceLine" id="cb7-15" data-line-number="15"><span class="co">#&gt; 11 reduced_var_2       0.501 block1_x5       5</span></a>
<a class="sourceLine" id="cb7-16" data-line-number="16"><span class="co">#&gt; 12 reduced_var_3       0.534 block2_x2       7</span></a>
<a class="sourceLine" id="cb7-17" data-line-number="17"><span class="co">#&gt; 13 reduced_var_3       0.534 block2_x5      10</span></a>
<a class="sourceLine" id="cb7-18" data-line-number="18"><span class="co">#&gt; 14 reduced_var_4       0.514 block2_x1       6</span></a>
<a class="sourceLine" id="cb7-19" data-line-number="19"><span class="co">#&gt; 15 reduced_var_4       0.514 block2_x4       9</span></a></code></pre></div>
</div>
<div id="direct-measure-reduce-and-partitioners" class="section level2">
<h2 class="hasAnchor">
<a href="#direct-measure-reduce-and-partitioners" class="anchor"></a>Direct-Measure-Reduce and Partitioners</h2>
<p>Partitioners are functions that tell the partition algorithm 1) what to try to reduce 2) how to measure how much information is lost from the reduction and 3) how to reduce the data. We call this approach Direct-Measure-Reduce. In partition, functions that handle 1) are thus called directors, functions that handle 2) are called metrics, and functions that handle 3) are called reducers. partition has a number of pre-specified partitioners for agglomerative data reduction, but this approach is also quite flexible. See the <a href="extending-partition.html">vignette on extending partition</a> to learn more about custom partitioners.</p>
<p>The default partitioner in <code><a href="../reference/partition.html">partition()</a></code> is <code><a href="../reference/part_icc.html">part_icc()</a></code>. <code><a href="../reference/part_icc.html">part_icc()</a></code> uses a correlation-based distance matrix to find the pair of variables with the smallest distance between them, intraclass correlation (ICC) to measure information explained by the reduced variable, and scaled row means to reduce variables with a sufficient minimum ICC. <code><a href="../reference/part_icc.html">part_icc()</a></code> is generally fast and scalable.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="kw"><a href="../reference/part_icc.html">part_icc</a></span>()</a>
<a class="sourceLine" id="cb8-2" data-line-number="2"><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt;    Metric: Intraclass Correlation </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt;    Reducer: Scaled Mean</span></a></code></pre></div>
<p>There are several other partitioners, which all have names in the format <code>part_*()</code></p>
<table class="table">
<colgroup>
<col width="25%">
<col width="25%">
<col width="25%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">partitioner</th>
<th align="left">direct</th>
<th align="left">measure</th>
<th align="left">reduce</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><code><a href="../reference/part_icc.html">part_icc()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">ICC</td>
<td align="left">scaled row means</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/part_kmeans.html">part_kmeans()</a></code></td>
<td align="left">K-Means Clusters</td>
<td align="left">Minimum ICC</td>
<td align="left">scaled row means</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/part_minr2.html">part_minr2()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Minimum R-Squared</td>
<td align="left">scaled row means</td>
</tr>
<tr class="even">
<td align="left"><code><a href="../reference/part_pc1.html">part_pc1()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Variance Explained (PCA)</td>
<td align="left">first principal component</td>
</tr>
<tr class="odd">
<td align="left"><code><a href="../reference/part_icc.html">part_icc()</a></code></td>
<td align="left">Minimum Distance</td>
<td align="left">Standardized Mutual Information</td>
<td align="left">scaled row means</td>
</tr>
</tbody>
</table>
<p>To apply a different partitioner, use the <code>partitioner</code> argument in <code><a href="../reference/partition.html">partition()</a></code>.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1">prt_kmeans &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(df, <span class="dt">threshold =</span> <span class="fl">.5</span>, <span class="dt">partitioner =</span> <span class="kw"><a href="../reference/part_kmeans.html">part_kmeans</a></span>())</a>
<a class="sourceLine" id="cb9-2" data-line-number="2">prt_kmeans</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; Partitioner:</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="co">#&gt;    Director: K-Means Clusters </span></a>
<a class="sourceLine" id="cb9-5" data-line-number="5"><span class="co">#&gt;    Metric: Minimum Intraclass Correlation </span></a>
<a class="sourceLine" id="cb9-6" data-line-number="6"><span class="co">#&gt;    Reducer: Scaled Mean</span></a>
<a class="sourceLine" id="cb9-7" data-line-number="7"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-8" data-line-number="8"><span class="co">#&gt; Reduced Variables:</span></a>
<a class="sourceLine" id="cb9-9" data-line-number="9"><span class="co">#&gt; 4 reduced variables created from 8 observed variables</span></a>
<a class="sourceLine" id="cb9-10" data-line-number="10"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-11" data-line-number="11"><span class="co">#&gt; Mappings:</span></a>
<a class="sourceLine" id="cb9-12" data-line-number="12"><span class="co">#&gt; reduced_var_1 = {block2_x1, block2_x4}</span></a>
<a class="sourceLine" id="cb9-13" data-line-number="13"><span class="co">#&gt; reduced_var_2 = {block1_x1, block1_x4}</span></a>
<a class="sourceLine" id="cb9-14" data-line-number="14"><span class="co">#&gt; reduced_var_3 = {block2_x2, block2_x5}</span></a>
<a class="sourceLine" id="cb9-15" data-line-number="15"><span class="co">#&gt; reduced_var_4 = {block3_x3, block3_x5}</span></a>
<a class="sourceLine" id="cb9-16" data-line-number="16"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb9-17" data-line-number="17"><span class="co">#&gt; Minimum information:</span></a>
<a class="sourceLine" id="cb9-18" data-line-number="18"><span class="co">#&gt; 0.514</span></a></code></pre></div>
</div>
<div id="permutation-tests" class="section level2">
<h2 class="hasAnchor">
<a href="#permutation-tests" class="anchor"></a>Permutation tests</h2>
<p>Data sets with variables that are independent tend to reduce only at lower thresholds because too much information is lost. In this set of 10 independent variables, setting the threshold to .5 results in a partition with no reduction. The original data is returned.</p>
<div class="sourceCode" id="cb10"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb10-1" data-line-number="1"><span class="co"># create a data.frame of 10 independent variables</span></a>
<a class="sourceLine" id="cb10-2" data-line-number="2">ind_df &lt;-<span class="st"> </span>purrr<span class="op">::</span><span class="kw"><a href="https://purrr.tidyverse.org/reference/map.html">map_dfc</a></span>(<span class="dv">1</span><span class="op">:</span><span class="dv">10</span>, <span class="op">~</span><span class="kw"><a href="https://www.rdocumentation.org/packages/stats/topics/Normal">rnorm</a></span>(<span class="dv">30</span>))</a>
<a class="sourceLine" id="cb10-3" data-line-number="3">ind_part &lt;-<span class="st"> </span><span class="kw"><a href="../reference/partition.html">partition</a></span>(ind_df, <span class="fl">.5</span>)</a>
<a class="sourceLine" id="cb10-4" data-line-number="4">ind_part</a>
<a class="sourceLine" id="cb10-5" data-line-number="5"><span class="co">#&gt; Partitioner:</span></a>
<a class="sourceLine" id="cb10-6" data-line-number="6"><span class="co">#&gt;    Director: Minimum Distance (Pearson) </span></a>
<a class="sourceLine" id="cb10-7" data-line-number="7"><span class="co">#&gt;    Metric: Intraclass Correlation </span></a>
<a class="sourceLine" id="cb10-8" data-line-number="8"><span class="co">#&gt;    Reducer: Scaled Mean</span></a>
<a class="sourceLine" id="cb10-9" data-line-number="9"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb10-10" data-line-number="10"><span class="co">#&gt; Reduced Variables:</span></a>
<a class="sourceLine" id="cb10-11" data-line-number="11"><span class="co">#&gt; 0 reduced variables created from 0 observed variables</span></a>
<a class="sourceLine" id="cb10-12" data-line-number="12"></a>
<a class="sourceLine" id="cb10-13" data-line-number="13"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/identical">identical</a></span>(ind_df, <span class="kw"><a href="../reference/partition_scores.html">partition_scores</a></span>(ind_part))</a>
<a class="sourceLine" id="cb10-14" data-line-number="14"><span class="co">#&gt; [1] TRUE</span></a></code></pre></div>
<p>Because we can expect this, comparing partitions we fit on our data to partitions fit on independent data helps assess the reasonableness of our clusters. One easy way to compare how much data is reduced compared to if the data were completely independent is to use <code><a href="../reference/plot_partitions.html">plot_stacked_area_clusters()</a></code>, which creates partitions for a series of thresholds using both the observed data and a permuted (independent) version of the data. In general, there are many more raw features per reduced variable for the real data than the independent data; it takes a very low threshold for the permuted data to start forming clusters.</p>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb11-1" data-line-number="1"><span class="kw"><a href="../reference/plot_partitions.html">plot_stacked_area_clusters</a></span>(df) <span class="op">+</span></a>
<a class="sourceLine" id="cb11-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>(<span class="dv">14</span>)</a></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-11-1.png" width="672" style="display: block; margin: auto;"></p>
<p>partition also has a set of tools for more extensive permutation tests. <code><a href="../reference/map_partition.html">map_partition()</a></code> will fit partitions for a range of thresholds for the observed data; <code><a href="../reference/test_permutation.html">test_permutation()</a></code> will do the same but also fit partitions for a set of permuted data sets (100 by default). <code><a href="../reference/plot_permutation.html">plot_permutation()</a></code> visualizes the results, comparing information, number of clusters, or number of raw features that were reduced.</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb12-1" data-line-number="1">perms &lt;-<span class="st"> </span><span class="kw"><a href="../reference/test_permutation.html">test_permutation</a></span>(df, <span class="dt">nperm =</span> <span class="dv">10</span>)</a>
<a class="sourceLine" id="cb12-2" data-line-number="2">perms</a>
<a class="sourceLine" id="cb12-3" data-line-number="3"><span class="co">#&gt; # A tibble: 6 x 9</span></a>
<a class="sourceLine" id="cb12-4" data-line-number="4"><span class="co">#&gt;   target_info observed_info nclusters nreduced partition perm_observed_i…</span></a>
<a class="sourceLine" id="cb12-5" data-line-number="5"><span class="co">#&gt;         &lt;dbl&gt;         &lt;dbl&gt;     &lt;int&gt;    &lt;int&gt; &lt;list&gt;               &lt;dbl&gt;</span></a>
<a class="sourceLine" id="cb12-6" data-line-number="6"><span class="co">#&gt; 1         0.1         0.119         1       15 &lt;S3: par…            0.106</span></a>
<a class="sourceLine" id="cb12-7" data-line-number="7"><span class="co">#&gt; 2         0.2         0.218         2       15 &lt;S3: par…            0.300</span></a>
<a class="sourceLine" id="cb12-8" data-line-number="8"><span class="co">#&gt; 3         0.3         0.395         3       15 &lt;S3: par…            1    </span></a>
<a class="sourceLine" id="cb12-9" data-line-number="9"><span class="co">#&gt; 4         0.4         0.426         3       14 &lt;S3: par…            1    </span></a>
<a class="sourceLine" id="cb12-10" data-line-number="10"><span class="co">#&gt; 5         0.5         0.501         4       10 &lt;S3: par…            1    </span></a>
<a class="sourceLine" id="cb12-11" data-line-number="11"><span class="co">#&gt; 6         0.6         1             0        0 &lt;S3: par…            1    </span></a>
<a class="sourceLine" id="cb12-12" data-line-number="12"><span class="co">#&gt; # … with 3 more variables: perm_nclusters &lt;dbl&gt;, perm_nreduced &lt;dbl&gt;,</span></a>
<a class="sourceLine" id="cb12-13" data-line-number="13"><span class="co">#&gt; #   permutation &lt;list&gt;</span></a></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw"><a href="../reference/plot_permutation.html">plot_permutation</a></span>(perms, <span class="dt">.plot =</span> <span class="st">"nreduced"</span>) <span class="op">+</span></a>
<a class="sourceLine" id="cb13-2" data-line-number="2"><span class="st">  </span><span class="kw"><a href="https://www.rdocumentation.org/packages/ggplot2/topics/ggtheme">theme_minimal</a></span>(<span class="dv">14</span>)</a></code></pre></div>
<p><img src="introduction-to-partition_files/figure-html/unnamed-chunk-13-1.png" width="672" style="display: block; margin: auto;"></p>
<p><code><a href="../reference/plot_partitions.html">plot_ncluster()</a></code> and <code><a href="../reference/plot_partitions.html">plot_information()</a></code>, in addition to plotting individual partitions, also plot the results of <code><a href="../reference/test_permutation.html">test_permutation()</a></code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#introduction-to-the-partition-package">Introduction to the partition package</a></li>
      <li><a href="#direct-measure-reduce-and-partitioners">Direct-Measure-Reduce and Partitioners</a></li>
      <li><a href="#permutation-tests">Permutation tests</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Joshua Millstein, <a href="https://malco.io">Malcolm Barrett</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
